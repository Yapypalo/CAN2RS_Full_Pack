/* ========================== can_drv.h ========================== */
#ifndef CAN_DRV_H
#define CAN_DRV_H

#include "stm32f1xx_hal.h"

extern CAN_HandleTypeDef hcan1;

/**
 * @brief Инициализация CAN1.
 */
void CAN_Init(void);

/**
 * @brief Отправить CAN-сообщение.
 * @param id    – 11-bit идентификатор
 * @param buf   – данные (до 8 байт)
 * @param len   – длина буфера
 */
HAL_StatusTypeDef CAN_Send(uint16_t id, uint8_t *buf, uint8_t len);

/**
 * @brief Проверить, есть ли новое CAN-сообщение.
 */
bool CAN_MessagePending(void);

/**
 * @brief Получить новый CAN-пакет.
 */
void CAN_Receive(uint16_t *out_id, uint8_t *buf, uint8_t *out_len);

#endif // CAN_DRV_H
